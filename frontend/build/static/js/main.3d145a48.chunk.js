(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{13:function(e,t,n){e.exports={formGroup:"ProjectForm_formGroup__1yfp2"}},15:function(e,t,n){e.exports={formGroup:"ToDoForm_formGroup__MjCLj"}},32:function(e,t,n){e.exports={users:"Users_users__2Iv27"}},33:function(e,t,n){e.exports={textCol:"Notes_textCol__28aIv"}},36:function(e,t,n){e.exports={menu:"Menu_menu__1wQ3F"}},37:function(e,t,n){e.exports={footer:"Footer_footer__1w0lV"}},38:function(e,t,n){e.exports={projectData:"ProjectView_projectData__1w3fb"}},44:function(e,t,n){},45:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(31),c=n.n(a),i=(n(44),n(3)),o=n(8),u=n(9),j=n(11),l=n(10),h=(n(45),n(12)),d=n.n(h),b=n(0),p=function(e){var t=e.user;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.username}),Object(b.jsxs)("td",{children:[t.firstname," ",t.lastname]}),Object(b.jsx)("td",{children:t.email})]})},f=n(32),O=n.n(f),g=function(e){var t=e.users.map((function(e){return Object(b.jsx)(p,{user:e},e.uuid)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("table",{className:O.a.users,children:Object(b.jsxs)("thead",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Login"}),Object(b.jsx)("th",{children:"Full name"}),Object(b.jsx)("th",{children:"Email"})]}),t]})}),e.isFirstUsersPage?null:Object(b.jsx)("button",{onClick:function(){return e.changePage("users","previous")},children:"Previous page"}),e.isLastUsersPage?null:Object(b.jsx)("button",{onClick:function(){return e.changePage("users","next")},children:"Next page"}),Object(b.jsxs)("div",{children:["\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ",e.currentPage]})]})},m=function(e){var t=e.note,n=e.deleteNote;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.project.name.slice(0,60)}),Object(b.jsx)("td",{children:t.text.slice(0,100)}),Object(b.jsxs)("td",{children:[t.user.firstname," ",t.user.lastname]}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n("notes",t.uuid)},type:"button",children:"Delete"})})]})},x=n(33),v=n.n(x),P=n(4),k=function(e){var t=e.notes.map((function(t){return Object(b.jsx)(m,{note:t,deleteNote:e.deleteNote},t.uuid)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Project name"}),Object(b.jsx)("th",{className:v.a.textCol,children:"Text"}),Object(b.jsx)("th",{children:"Author"}),Object(b.jsx)("th",{})]}),t]})}),e.isFirstNotesPage?null:Object(b.jsx)("button",{onClick:function(){return e.changePage("notes","previous")},children:"Previous page"}),e.isLastNotesPage?null:Object(b.jsx)("button",{onClick:function(){return e.changePage("notes","next")},children:"Next page"}),Object(b.jsxs)("div",{children:["\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ",e.currentPage]}),Object(b.jsx)(P.b,{to:"/notes/create",children:"Create"})]})},C=n(39),y=function(e){var t=e.project,n=e.deleteProject,s=t.users.map((function(e){return"".concat(e.firstname," ").concat(e.lastname)})).join("---");return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(P.c,{to:"project/".concat(t.uuid),children:t.name.slice(0,60)})}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:t.repoLink,children:t.repoLink})}),Object(b.jsx)("td",{children:s}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n("projects",t.uuid)},type:"button",children:"Delete"})}),Object(b.jsx)("td",{children:Object(b.jsx)(P.c,{to:"/project/change/".concat(t.uuid),children:"Change"})})]})},L=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={foundProjects:s.props.projects,searchStr:""},s}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(i.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t,n=this;t=this.state.searchStr?this.props.projects.filter((function(e){return e.name.includes(n.state.searchStr)})):this.props.projects,this.setState({foundProjects:t}),this.props.update(t),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsx)("label",{htmlFor:"searchField",children:"Search by name..."}),Object(b.jsx)("input",{id:"searchField",name:"searchStr",value:this.state.searchStr,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("button",{type:"submit",children:"Search"}),Object(b.jsxs)("span",{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",this.state.foundProjects.length," \u0437\u0430\u043f\u0438\u0441\u0435\u0439"]})]})}}]),n}(r.a.Component),S=function(e){var t=Object(s.useState)(e.projects),n=Object(C.a)(t,2),r=n[0],a=n[1],c=function(e){a(e)};return Object(b.jsxs)("div",{children:[Object(b.jsx)(L,{projects:e.projects,update:c}),Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Repository"}),Object(b.jsx)("th",{children:"Participants"}),Object(b.jsx)("th",{})]}),r.map((function(t){return Object(b.jsx)(y,{deleteProject:e.deleteProject,changeProject:e.changeProject,project:t},t.uuid)}))]})}),e.isFirstProjectPage?null:Object(b.jsx)("button",{onClick:function(){e.changePage("projects","previous"),c(e.projects)},children:"Previous page"}),e.isLastProjectPage?null:Object(b.jsx)("button",{onClick:function(){e.changePage("projects","next"),c(e.projects)},children:"Next page"}),Object(b.jsxs)("div",{children:["\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ",e.currentPage]}),Object(b.jsx)(P.b,{to:"/projects/create",children:"Create"})]})},N=n(36),F=n.n(N),U=function(e){return Object(b.jsx)("li",{children:"Login"!==e.item?Object(b.jsx)(P.c,{to:"/".concat(e.item.toLowerCase()),children:e.item}):e.isAuthenticated()?Object(b.jsx)("button",{onClick:function(){return e.logout()},children:"\u0412\u044b\u0439\u0442\u0438"}):Object(b.jsx)(P.c,{to:"/".concat(e.item.toLowerCase()),children:"\u0412\u043e\u0439\u0442\u0438"})})},w=function(e){var t=e.items.map((function(t){return Object(b.jsx)(U,{item:t,isAuthenticated:e.isAuthenticated,logout:e.logout},t)}));return Object(b.jsxs)("nav",{className:F.a.menu,children:[Object(b.jsx)("ul",{children:t}),Object(b.jsxs)("ul",{children:[e.isAuthenticated()?"Hello":""," ",e.username]})]})},_=n(37),T=n.n(_),D=function(e){return Object(b.jsx)("div",{className:T.a.footer,children:"Todo service. \xa9 All rights reserved."})},A=n(2),G=function(e){var t=e.location;return Object(b.jsx)("div",{children:Object(b.jsxs)("h1",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430!!!"]})})},E=n(38),H=n.n(E),I=function(e){var t=e.projects,n=Object(A.g)().id,s=t.find((function(e){return e.uuid==n})),r=s.users.map((function(e){return"".concat(e.firstname," ").concat(e.lastname)})).join("---");return Object(b.jsxs)("div",{className:H.a.projectData,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Name:"})," ",s.name]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Link on repository:"})," ",s.repoLink]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Participants:"})," ",r]})]})},M=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={login:"",password:""},s}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(i.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.getToken(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsx)("input",{type:"text",name:"login",value:this.state.login,placeholder:"login",onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"password",name:"password",value:this.state.password,placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("button",{type:"submit",children:"Login"})]})}}]),n}(r.a.Component),B=n(21),J=n.n(B),V=n(13),z=n.n(V),Q=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={name:"",repoLink:"",users:[]},s.usersElements=s.props.allUsers.map((function(e){return Object(b.jsxs)("option",{value:e.uuid,children:[e.firstname," ",e.lastname]},e.uuid)})),s}return Object(u.a)(n,[{key:"handleChange",value:function(e){if(["name","repoLink"].includes(e.target.name))this.setState(Object(i.a)({},e.target.name,e.target.value));else{var t=Array.from(e.target.selectedOptions,(function(e){return e.value}));this.setState(Object(i.a)({},e.target.name,t))}}},{key:"handleSubmit",value:function(e){this.props.createProject({name:this.state.name,repoLink:this.state.repoLink,users:this.state.users},"projects"),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:z.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:z.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"repoLink",children:"Link of repository"}),Object(b.jsx)("input",{type:"text",id:"repoLink",name:"repoLink",value:this.state.repoLink,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:z.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"users",children:"Users"}),Object(b.jsx)("select",{multiple:!0,id:"users",name:"users",onChange:function(t){return e.handleChange(t)},children:this.usersElements})]}),Object(b.jsx)("button",{type:"submit",children:"Save"})]})}}]),n}(r.a.Component),R=n(15),W=n.n(R),q=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={project:s.props.allProjects[0].name,text:"",user:s.props.allUsers[0].firstname},s.projectsElements=s.props.allProjects.map((function(e){return Object(b.jsx)("option",{value:e.uuid,children:e.name},e.uuid)})),s.usersElements=s.props.allUsers.map((function(e){return Object(b.jsxs)("option",{value:e.uuid,children:[e.firstname," ",e.lastname]},e.uuid)})),s}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(i.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createNote({project:this.state.project,text:this.state.text,user:this.state.user},"notes"),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:W.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"project",children:"Project"}),Object(b.jsx)("select",{id:"project",name:"project",onChange:function(t){return e.handleChange(t)},children:this.projectsElements})]}),Object(b.jsxs)("div",{className:W.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"noteText",children:"Text"}),Object(b.jsx)("input",{id:"noteText",type:"text",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:W.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"user",children:"User"}),Object(b.jsx)("select",{id:"user",name:"user",onChange:function(t){return e.handleChange(t)},children:this.usersElements})]}),Object(b.jsx)("button",{type:"submit",children:"Save"})]})}}]),n}(r.a.Component),K=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).uuid=s.props.match.params.uuid,s.project=e.projects.find((function(e){return e.uuid===s.uuid})),s.state={name:s.project.name,repoLink:s.project.repoLink,users:s.project.users},s.usersElements=s.props.users.map((function(e){return Object(b.jsxs)("option",{value:e.uuid,children:[e.firstname," ",e.lastname]},e.uuid)})),s}return Object(u.a)(n,[{key:"handleChange",value:function(e){["name","repoLink"].includes(e.target.name)?this.setState(Object(i.a)({},e.target.name,e.target.value)):this.setState(Object(i.a)({},e.target.name,e.target.value.split(",")))}},{key:"handleSubmit",value:function(e){this.props.changeProject({name:this.state.name,repoLink:this.state.repoLink,users:this.state.users},"projects",this.uuid),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:z.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:z.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"repoLink",children:"Link of repository"}),Object(b.jsx)("input",{type:"text",id:"repoLink",name:"repoLink",value:this.state.repoLink,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:z.a.formGroup,children:[Object(b.jsx)("label",{htmlFor:"users",children:"Users"}),Object(b.jsx)("select",{multiple:!0,id:"users",name:"users",onChange:function(t){return e.handleChange(t)},children:this.usersElements})]}),Object(b.jsx)("button",{type:"submit",children:"Save"})]})}}]),n}(r.a.Component),X=Object(A.h)(K),Y=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).url="http://185.20.227.181:8000",s.state={users:[],projects:[],menuItem:["Users","Projects","Notes","Login"],notes:[],token:"",username:"",usersPage:1,isLastUsersPage:!1,isFirstUsersPage:!1,projectPage:1,isLastProjectPage:!1,isFirstProjectPage:!1,notesPage:1,isLastNotesPage:!1,isFirstNotesPage:!1},s}return Object(u.a)(n,[{key:"setUsername",value:function(e){this.isAuthenticated()&&this.setState({username:e})}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Token ".concat(this.state.token)),e}},{key:"setToken",value:function(e){var t=this;(new J.a).set("token",e),this.setState({token:e},(function(){return t.loadData()}))}},{key:"getToken",value:function(e,t){var n=this;d.a.post("".concat(this.url,"/api-token-auth/"),{username:e,password:t}).then((function(t){n.setToken(t.data.token),n.setUsername(e)})).catch((function(e){return alert("Wrong login or password!!!")}))}},{key:"getCookieFromStorage",value:function(){var e=this,t=(new J.a).get("token");this.setState({token:t},(function(){return e.loadData()}))}},{key:"changePage",value:function(e,t){var n,s,r,a,c,o,u=this,j=this.getHeaders();switch(e){case"projects":n=this.state.projectPage,s="projectPage",r=this.state.isLastProjectPage,a="isLastProjectPage",c=this.state.isFirstProjectPage,o="isFirstProjectPage";break;case"users":n=this.state.usersPage,s="usersPage",r=this.state.isLastUsersPage,a="isLastUsersPage",c=this.state.isFirstUsersPage,o="isFirstUsersPage";break;case"notes":n=this.state.notesPage,s="notesPage",r=this.state.isLastNotesPage,a="isLastNotesPage",c=this.state.isFirstNotesPage,o="isFirstNotesPage"}if("next"!==t||r){if("previous"!==t||c)return;--n}else++n;d.a.get("".concat(this.url,"/api/").concat(e,"/?page=").concat(n),{headers:j}).then((function(t){var r,c=t.data.results;u.setState((r={},Object(i.a)(r,e,c),Object(i.a)(r,s,n),Object(i.a)(r,a,!t.data.next),Object(i.a)(r,o,!t.data.previous),r))})).catch((function(e){return console.log(e)}))}},{key:"loadData",value:function(){var e=this,t=this.getHeaders();d.a.get("".concat(this.url,"/api/0.2/users/?page=1"),{headers:t}).then((function(t){var n=t.data.results;e.setState({users:n})})).catch((function(e){return console.log(e)})),d.a.get("".concat(this.url,"/api/projects/"),{headers:t}).then((function(t){var n=t.data.results;e.setState({projects:n})})).catch((function(e){return console.log(e)})),d.a.get("".concat(this.url,"/api/notes/"),{headers:t}).then((function(t){var n=t.data.results;e.setState({notes:n})})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){this.setToken(""),this.setState({username:""})}},{key:"isAuthenticated",value:function(){return""!=this.state.token}},{key:"deleteObject",value:function(e,t){var n=this,s=this.getHeaders();d.a.delete("".concat(this.url,"/api/").concat(e,"/").concat(t,"/"),{headers:s}).then((function(s){var r=n.state[e].filter((function(e){return e.uuid!==t}));n.setState(Object(i.a)({},e,r))})).catch((function(e){return console.log(e)}))}},{key:"createObject",value:function(e,t){var n=this,s=this.getHeaders();d.a.post("".concat(this.url,"/api/").concat(t,"/"),e,{headers:s}).then((function(e){var s=e.data;switch(t){case"projects":var r=n.state.users.filter((function(e){return s.users.find((function(t){return t===e.uuid}))}));s.users=r;break;case"notes":var a=n.state.projects.find((function(e){return e.uuid===s.uuid}));s.project=a;var c=n.state.users.find((function(e){return e.uuid===s.uuid}));s.user=c}})).catch((function(e){return console.log(e)}))}},{key:"changeObject",value:function(e,t,n){var s=this.getHeaders();d.a.patch("".concat(this.url,"/api/").concat(t,"/").concat(n,"/"),e,{headers:s}).then((function(e){e.data})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){this.getCookieFromStorage()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(P.a,{children:[Object(b.jsx)(w,{items:this.state.menuItem,isAuthenticated:this.isAuthenticated.bind(this),logout:this.logout.bind(this),username:this.state.username}),Object(b.jsxs)(A.d,{children:[Object(b.jsx)(A.b,{exact:!0,path:"/",render:function(){return Object(b.jsx)(g,{users:e.state.users,changePage:function(t,n){e.changePage(t,n)},currentPage:e.state.usersPage,isLastUsersPage:e.state.isLastUsersPage,isFirstUsersPage:e.state.isFirstUsersPage})}}),Object(b.jsx)(A.a,{from:"/users",to:"/"}),Object(b.jsx)(A.b,{exact:!0,path:"/projects",render:function(){return Object(b.jsx)(S,{deleteProject:function(t,n){return e.deleteObject(t,n)},projects:e.state.projects,changePage:function(t,n){e.changePage(t,n)},currentPage:e.state.projectPage,isLastProjectPage:e.state.isLastProjectPage,isFirstProjectPage:e.state.isFirstProjectPage})}}),Object(b.jsx)(A.b,{exact:!0,path:"/notes",render:function(){return Object(b.jsx)(k,{deleteNote:function(t,n){e.deleteObject(t,n)},notes:e.state.notes,changePage:function(t,n){e.changePage(t,n)},currentPage:e.state.notesPage,isLastNotesPage:e.state.isLastNotesPage,isFirstNotesPage:e.state.isFirstNotesPage})}}),Object(b.jsx)(A.b,{exact:!0,path:"/project/:id",children:Object(b.jsx)(I,{projects:this.state.projects})}),Object(b.jsx)(A.b,{exact:!0,path:"/project/change/:uuid",children:Object(b.jsx)(X,{projects:this.state.projects,users:this.state.users,changeProject:function(t,n,s){return e.changeObject(t,n,s)}})}),Object(b.jsx)(A.b,{exact:!0,path:"/login",render:function(){return Object(b.jsx)(M,{getToken:function(t,n){return e.getToken(t,n)}})}}),Object(b.jsx)(A.b,{exact:!0,path:"/projects/create",render:function(){return Object(b.jsx)(Q,{allUsers:e.state.users,createProject:function(t,n){return e.createObject(t,n)}})}}),Object(b.jsx)(A.b,{exact:!0,path:"/notes/create",render:function(){return Object(b.jsx)(q,{allProjects:e.state.projects,allUsers:e.state.users,createNote:function(t,n){return e.createObject(t,n)}})}}),Object(b.jsx)(A.b,{render:G})]})]})}),Object(b.jsx)(D,{})]})}}]),n}(r.a.Component),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[76,1,2]]]);
//# sourceMappingURL=main.3d145a48.chunk.js.map